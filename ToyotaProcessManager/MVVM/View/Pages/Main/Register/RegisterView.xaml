<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ToyotaProcessManager.MVVM.View.Pages.Main.Register.RegisterView"
             xmlns:elements="clr-namespace:ToyotaProcessManager.MVVM.View.Components.Elements"
             xmlns:buttons="clr-namespace:ToyotaProcessManager.MVVM.View.Components.Buttons"
             Title="RegisterView"
             NavigationPage.HasNavigationBar="False"
             x:Name="Root">

    <Grid RowDefinitions="Auto,*" Padding="10">

        <Border BackgroundColor="{StaticResource ToyotaRed}"
                StrokeThickness="0">

            <Border.StrokeShape>
                <RoundRectangle CornerRadius="24,24,0,0"/>
            </Border.StrokeShape>

            <Grid ColumnDefinitions="*,*,*" Padding="10" ColumnSpacing="10">

                <Border StrokeThickness="0">
                    
                    <Label Text="Registros"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           FontSize="40"/>
                </Border>

                <buttons:IconButton Grid.Column="1"
                                    BackgroundColorCode="{StaticResource Tertiary}"
                                    Unicode="{StaticResource FAS_Table}"
                                    TextContent="Criar tabela"
                                    FontSize="20"
                                    Event="{Binding Path=SwitchToCreateTablesCommand, Source={x:Reference Root}}"/>


                <buttons:IconButton Grid.Column="2"
                                    BackgroundColorCode="{StaticResource Tertiary}"
                                    Unicode="{StaticResource FAS_Eye}"
                                    TextContent="Ver tabelas"
                                    FontSize="20"
                                    Event="{Binding Path=SwitchToShowTablesCommand, Source={x:Reference Root}}">

                </buttons:IconButton>

            </Grid>

        </Border>

        <Grid Grid.Row="1">

            <!--  Process  -->
            <Border IsVisible="{Binding IsInProcessPanel}"
                    Style="{StaticResource Border.Radius24}"
                    BackgroundColor="{StaticResource Tertiary}">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="0,0,24,24"/>
                </Border.StrokeShape>

                <Grid ColumnDefinitions="*,2*" ColumnSpacing="10">

                    <Border Style="{StaticResource Border.Radius14}"
                            BackgroundColor="{StaticResource ToyotaRed}">
                        
                        <Grid RowDefinitions="Auto,*" RowSpacing="10">

                            <buttons:SearchBar SearchText="{Binding SearchProcessText, Mode=TwoWay}"/>

                            <CollectionView Grid.Row="1" ItemsSource="{Binding FiltredProcessList}"
                                            ItemTemplate="{StaticResource ToastProcessStyle}"
                                            SelectionMode="None"
                                            VerticalScrollBarVisibility="Never"                                  
                                            HorizontalOptions="Fill"
                                            VerticalOptions="Fill">

                                <CollectionView.ItemsLayout>
                                    <GridItemsLayout Orientation="Vertical" VerticalItemSpacing="5" Span="1"/>
                                </CollectionView.ItemsLayout>

                            </CollectionView>

                        </Grid>

                    </Border>

                    <Grid Grid.Column="1"  RowDefinitions="*,auto" RowSpacing="10">

                        <Border Style="{StaticResource Border.Radius24}"
                                BackgroundColor="{StaticResource Primary}">

                            <ScrollView>

                                <VerticalStackLayout Spacing="10" Padding="10">

                                    <Label Text="Criar processo" 
                                           FontAttributes="Bold"
                                           FontSize="60"                                   
                                           HorizontalTextAlignment="Center"/>

                                    <Grid ColumnDefinitions="Auto,*">

                                        <Border StrokeThickness="0"
                                                Padding="30">

                                            <AbsoluteLayout HeightRequest="170"
                                                            WidthRequest="170">

                                                <elements:CircularIcon AbsoluteLayout.LayoutBounds="1,1,1,1"
                                                                       AbsoluteLayout.LayoutFlags="All"
                                                                       Unicode="{Binding Icon.Unicode}"
                                                                       ColorCode="{Binding Icon.ColorCode}"
                                                                       IconSize="170"/>

                                                <Border AbsoluteLayout.LayoutBounds="1,0.0,0.3,0.3"
                                                        AbsoluteLayout.LayoutFlags="All"
                                                        Style="{StaticResource Border.Circle}"
                                                        BackgroundColor="{StaticResource Tertiary}"
                                                        HorizontalOptions="Center"
                                                        VerticalOptions="Center"
                                                        Padding="5">

                                                    <Label Text="{DynamicResource FAS_Pen}"
                                                           FontFamily="FAS"
                                                           HorizontalOptions="Center"
                                                           VerticalOptions="Center"
                                                           Padding="5"
                                                           FontSize="30"
                                                           TextColor="White"/>

                                                </Border>

                                            </AbsoluteLayout>

                                            <Border.GestureRecognizers>
                                                <TapGestureRecognizer Command="{Binding UpdateIconCommand}"/>
                                            </Border.GestureRecognizers>

                                        </Border>

                                        <Border Grid.Column="1" 
                                                VerticalOptions="Center"                                        
                                                Style="{StaticResource Border.Radius24}"
                                                BackgroundColor="{StaticResource Secondary}">

                                            <VerticalStackLayout>

                                                <Label Text="Nome do processo:" FontSize="25"/>

                                                <Border Padding="10,0,10,0"
                                                        Style="{StaticResource Border.Radius14}"
                                                        BackgroundColor="{StaticResource ToyotaLightRed}">

                                                    <Entry BackgroundColor="Transparent" 
                                                           FontSize="25"
                                                           FontAttributes="Bold"
                                                           VerticalTextAlignment="Center"
                                                           Text="{Binding Title}"/>

                                                </Border>

                                                <Label Text="Descrição processo:" FontSize="25"/>
                                                <Border Padding="10,0,10,0"
                                                        Style="{StaticResource Border.Radius14}"
                                                        BackgroundColor="{StaticResource ToyotaLightRed}">

                                                    <Editor AutoSize="TextChanges" 
                                                            FontSize="17"
                                                            VerticalTextAlignment="Center"
                                                            Text="{Binding Description}"/>

                                                </Border>

                                            </VerticalStackLayout>

                                        </Border>

                                    </Grid>

                                    <Grid IsVisible="{Binding IsInCreateMode}">

                                        <buttons:IconButton BackgroundColorCode="#FF4C4C"
                                                            Unicode="{DynamicResource FAS_CirclePlus}"
                                                            TextContent="Criar processo"
                                                            FontSize="20"
                                                            Event="{Binding CreateNewProcessCommand}"/>

                                    </Grid>

                                    <Grid IsVisible="{Binding IsInEditMode}"
                                          ColumnDefinitions="*,*" ColumnSpacing="10">

                                        <buttons:IconButton BackgroundColorCode="#FF4C4C"
                                                            Unicode="{DynamicResource FAS_CircleXmark}"
                                                            TextContent="Cancelar alterações"
                                                            FontSize="20"
                                                            Event="{Binding CancelUpdateProcessCommand}"/>

                                        <buttons:IconButton BackgroundColorCode="#0078D7"
                                                            Grid.Column="1"
                                                            Unicode="{DynamicResource FAS_CircleCheck}"
                                                            TextContent="Salvar alterações"
                                                            FontSize="20"
                                                            Event="{Binding SaveUpdateProcessCommand}"/>

                                    </Grid>

                                </VerticalStackLayout>

                            </ScrollView>

                        </Border>

                        <HorizontalStackLayout HorizontalOptions="End" Spacing="10" Grid.Column="1" Grid.Row="1">

                            <buttons:IconButton BackgroundColorCode="{StaticResource ToyotaRed}"
                                                Unicode="{DynamicResource FAS_CaretRight}"
                                                TextContent="Colaboradores"
                                                FontSize="20"
                                                Event="{Binding SwitchToEmployeePanelCommand}"/>

                        </HorizontalStackLayout>

                    </Grid>

                </Grid>


            </Border>
            
            <!--  Emploeer  -->
            <Border IsVisible="{Binding IsInEmployeePanel}"
                    Style="{StaticResource Border.Radius24}"
                    BackgroundColor="{StaticResource Tertiary}">

                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="0,0,24,24"/>
                </Border.StrokeShape>

                <Grid ColumnDefinitions="2*,*" ColumnSpacing="10">

                    <Border Grid.Column="1"
                            Style="{StaticResource Border.Radius14}"
                            BackgroundColor="{StaticResource ToyotaRed}">

                        <Grid RowDefinitions="Auto,*" RowSpacing="10">

                            <buttons:SearchBar SearchText="{Binding SearchEmployeeText, Mode=TwoWay}"/>

                            <CollectionView Grid.Row="1" 
                                            ItemsSource="{Binding FiltredEmployeeList}"
                                            ItemTemplate="{StaticResource ToastEmployeeStyle}"
                                            SelectionMode="None"
                                            VerticalScrollBarVisibility="Never" 
                                            HorizontalOptions="Fill"
                                            VerticalOptions="Fill">

                                <CollectionView.ItemsLayout>
                                    <GridItemsLayout Orientation="Vertical" VerticalItemSpacing="5" Span="1"/>
                                </CollectionView.ItemsLayout>

                            </CollectionView>

                        </Grid>

                    </Border>

                    <Grid RowDefinitions="*,auto" RowSpacing="10">

                        <Border Style="{StaticResource Border.Radius24}"
                                BackgroundColor="{StaticResource Primary}">

                            <ScrollView>

                                <VerticalStackLayout Spacing="10" Padding="10">

                                    <Label Text="Cadastrar colaborador" FontSize="60" 
                                           FontAttributes="Bold"
                                           HorizontalOptions="Center"/>


                                    <Border Style="{StaticResource Border.Radius24}"
                                            BackgroundColor="{StaticResource Secondary}">

                                        <VerticalStackLayout>

                                            <Label Text="Nome do colaborador:" FontSize="25"/>
                                            <Border Style="{StaticResource Border.Radius14}"
                                                    BackgroundColor="{StaticResource ToyotaLightRed}"
                                                    Padding="10,0,10,0">

                                                <Entry BackgroundColor="Transparent" 
                                                       FontSize="25"
                                                       FontAttributes="Bold"
                                                       VerticalTextAlignment="Center"
                                                       Text="{Binding Name}"/>

                                            </Border>

                                            <Label Text="Cargo do colaborador:" FontSize="25"/>
                                            <Border Style="{StaticResource Border.Radius14}"
                                                    BackgroundColor="{StaticResource ToyotaLightRed}"
                                                    Padding="10,0,10,0">

                                                <Editor AutoSize="TextChanges" 
                                                        FontSize="17"
                                                        VerticalTextAlignment="Center"
                                                        Text="{Binding Position}"/>

                                            </Border>

                                        </VerticalStackLayout>

                                    </Border>

                                    <Grid IsVisible="{Binding IsInCreateMode}">

                                        <buttons:IconButton BackgroundColorCode="#FF4C4C"
                                                            Unicode="{DynamicResource FAS_CirclePlus}"
                                                            TextContent="Criar processo"
                                                            FontSize="20"
                                                            Event="{Binding CreateNewEmployeeCommand}"/>

                                    </Grid>

                                    <Grid IsVisible="{Binding IsInEditMode}"
                                          ColumnDefinitions="*,*" ColumnSpacing="10">

                                        <buttons:IconButton BackgroundColorCode="#FF4C4C"
                                                            Unicode="{DynamicResource FAS_CircleXmark}"
                                                            TextContent="Cancelar alterações"
                                                            FontSize="20"
                                                            Event="{Binding CancelUpdateEmployeeCommand}"/>

                                        <buttons:IconButton BackgroundColorCode="#0078D7"
                                                            Grid.Column="1"
                                                            Unicode="{DynamicResource FAS_CircleCheck}"
                                                            TextContent="Salvar alterações"
                                                            FontSize="20"
                                                            Event="{Binding SaveUpdateEmployeeCommand}"/>

                                    </Grid>

                                </VerticalStackLayout>

                            </ScrollView>


                        </Border>

                        <HorizontalStackLayout HorizontalOptions="Start" Spacing="10" Grid.Row="1">

                            <buttons:IconButton BackgroundColorCode="{StaticResource ToyotaRed}"
                                                Unicode="{DynamicResource FAS_CaretLeft}"
                                                TextContent="Processos"
                                                FontSize="20"
                                                Event="{Binding SwitchToProcessPanelCommand}"/>

                        </HorizontalStackLayout>

                    </Grid>
                    
                </Grid>

            </Border>
            
        </Grid>
  
    </Grid>

</ContentPage>