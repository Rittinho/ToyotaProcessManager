<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:elements="clr-namespace:ToyotaProcessManager.MVVM.View.Components.Elements"
             xmlns:buttons="clr-namespace:ToyotaProcessManager.MVVM.View.Components.Buttons"
             xmlns:icons="clr-namespace:ToyotaProcessManager.Services.Constants"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="ToyotaProcessManager.MVVM.View.Modal.Forms.TableConfigModal"
             xmlns:local="clr-namespace:ToyotaProcessManager.Services.ValueObjects"
             x:TypeArguments="local:ToyotaTableConfiguration"
             MinimumWidthRequest="1140"
             Padding="-20"
             BackgroundColor="#222222"
             x:Name="Root">

    <Grid RowDefinitions="Auto,*">

        <Border Style="{StaticResource Border.Radius24}"
                BackgroundColor="{StaticResource ToyotaBlue}">

            <Border.StrokeShape>
                <RoundRectangle CornerRadius="24,24,0,0"/>
            </Border.StrokeShape>

            <Label Text="Ocultar da tabela" FontSize="40"
                   HorizontalTextAlignment="Center"
                   FontAttributes="Bold"/>

        </Border>

        <Border Grid.Row="1"
                Style="{StaticResource Border.Radius24}"
                BackgroundColor="{StaticResource Tertiary}">

            <Border.StrokeShape>
                <RoundRectangle CornerRadius="0,0,24,24"/>
            </Border.StrokeShape>

            <Grid RowDefinitions="*,Auto" 
                  RowSpacing="10">

                <Grid ColumnDefinitions="*,1.5*,Auto" 
                      ColumnSpacing="10">

                    <Border Style="{StaticResource Border.Radius24}"
                                  BackgroundColor="{StaticResource Secondary}"                      
                                  Padding="10,10,10,0">

                        <Grid RowDefinitions="Auto,*" RowSpacing="10">

                            <buttons:SearchBar SearchText="{Binding SearchProcessText, Mode=TwoWay}"/>

                            <CollectionView Grid.Row="1"
                                                  ItemsSource="{Binding FiltredProcessList}"
                                                  ItemTemplate="{StaticResource ToastProcessSelectStyle}"
                                                  SelectionMode="Multiple"
                                                  VerticalScrollBarVisibility="Never"                                  
                                                  HorizontalOptions="Fill"
                                                  VerticalOptions="Fill">

                                <CollectionView.ItemsLayout>
                                    <GridItemsLayout Orientation="Vertical" VerticalItemSpacing="5" Span="1"/>
                                </CollectionView.ItemsLayout>

                            </CollectionView>

                        </Grid>

                    </Border>

                    <Border Grid.Column="1"
                        Style="{StaticResource Border.Radius24}"
                        BackgroundColor="{StaticResource Secondary}"
                        Padding="10,10,10,0">

                        <Grid RowDefinitions="Auto,*" RowSpacing="10">

                            <buttons:SearchBar SearchText="{Binding SearchEmployeeText, Mode=TwoWay}"/>

                            <CollectionView Grid.Row="1" ItemsSource="{Binding FiltredEmployeeList}"
                                        ItemTemplate="{StaticResource ToastEmployeeSelectStyle}"
                                        SelectionMode="Multiple"
                                        VerticalScrollBarVisibility="Never" 
                                        HorizontalOptions="Fill"
                                        VerticalOptions="Fill">

                                <CollectionView.ItemsLayout>
                                    <GridItemsLayout Orientation="Vertical" VerticalItemSpacing="5" Span="1"/>
                                </CollectionView.ItemsLayout>

                            </CollectionView>

                        </Grid>

                    </Border>

                </Grid>


                <HorizontalStackLayout Grid.Row="1" Grid.ColumnSpan="2" HorizontalOptions="End" Spacing="10">

                    <buttons:IconButton BackgroundColorCode="#FF4C4C"
                                        TextContent="Cancelar"
                                        Unicode="{StaticResource FAS_CircleXmark}"
                                        FontSize="20"
                                        Event="{Binding Source={x:Reference Root}, Path=CancelButtonCommand}"/>

                    <buttons:IconButton BackgroundColorCode="#4CAF50"
                                        TextContent="Salvar"
                                        Unicode="{StaticResource FAS_CircleCheck}"
                                        FontSize="20"
                                        Event="{Binding Source={x:Reference Root}, Path=CancelButtonCommand}"/>

                </HorizontalStackLayout>

            </Grid>

        </Border>

    </Grid>
    
</toolkit:Popup>
